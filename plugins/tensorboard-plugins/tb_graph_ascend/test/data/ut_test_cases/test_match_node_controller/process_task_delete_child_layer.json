[
    {
        "case_id": 1,
        "description": "参数错误（缺少graph_data）",
        "input": {
            "graph_data": null,
            "npu_node_name": "npu_node",
            "bench_node_name": "bench_node",
            "task": "summary"
        },
        "expected": {
            "success": false,
            "error": "参数错误"
        }
    },
    {
        "case_id": 2,
        "description": "节点未匹配（配置中无匹配关系）",
        "config": {
            "npuMatchNodes": {},
            "benchMatchNodes": {}
        },
        "input": {
            "graph_data": {
                "NPU": {
                    "node": {
                        "npu_node": {
                            "node_type": "Module",
                            "matched_node_link": [
                                "bench_node"
                            ],
                            "data": {
                                "precision_index": 0.95
                            }
                        }
                    }
                },
                "Bench": {
                    "node": {
                        "bench_node": {
                            "node_type": "Module",
                            "matched_node_link": [
                                "npu_node"
                            ]
                        }
                    }
                }
            },
            "npu_node_name": "npu_node",
            "bench_node_name": "bench_node",
            "task": "summary"
        },
        "expected": {
            "success": false,
            "error": "操作失败：节点未匹配，请先匹配节点"
        }
    },
    {
        "case_id": 3,
        "description": "SUMMARY任务删除成功（无子节点）",
        "config": {
            "npuMatchNodes": {
                "npu_node": "bench_node"
            },
            "benchMatchNodes": {
                "bench_node": "npu_node"
            },
            "npuUnMatchNodes": [],
            "benchUnMatchNodes": []
        },
        "input": {
            "graph_data": {
                "NPU": {
                    "node": {
                        "npu_node": {
                            "node_type": "Module",
                            "input_data": {
                                "input1": {
                                    "Max": 1.0,
                                    "MaxAbsErr": 0.1
                                }
                            },
                            "output_data": {
                                "output1": {
                                    "Max": 2.0,
                                    "MaxAbsErr": 0.1
                                }
                            },
                            "matched_node_link": [
                                "bench_node"
                            ],
                            "data": {
                                "precision_index": 0.95
                            }
                        }
                    }
                },
                "Bench": {
                    "node": {
                        "bench_node": {
                            "node_type": "Module",
                            "input_data": {
                                "input1": {
                                    "Max": 1.0
                                }
                            },
                            "output_data": {
                                "output1": {
                                    "Max": 2.0
                                }
                            },
                            "matched_node_link": [
                                "npu_node"
                            ]
                        }
                    }
                }
            },
            "npu_node_name": "npu_node",
            "bench_node_name": "bench_node",
            "task": "summary"
        },
        "expected": {
            "success": true,
            "data": {
                "npuMatchNodes": {},
                "benchMatchNodes": {},
                "npuUnMatchNodes": [
                    "npu_node"
                ],
                "benchUnMatchNodes": [
                    "bench_node"
                ]
            }
        }
    },
    {
        "case_id": 4,
        "description": "SUMMARY任务递归删除子节点",
        "config": {
            "npuMatchNodes": {
                "npu_parent": "bench_parent",
                "npu_child1": "bench_child1",
                "npu_child2": "bench_child2"
            },
            "benchMatchNodes": {
                "bench_parent": "npu_parent",
                "bench_child1": "npu_child1",
                "bench_child2": "npu_child2"
            },
            "npuUnMatchNodes": [],
            "benchUnMatchNodes": []
        },
        "input": {
            "graph_data": {
                "NPU": {
                    "node": {
                        "npu_parent": {
                            "node_type": "Module",
                            "subnodes": [
                                "npu_child1",
                                "npu_child2"
                            ],
                            "input_data": {
                                "parent_input": {
                                    "Max": 1.0,
                                    "Min": 0.1,
                                    "Mean": 0.5,
                                    "Norm": 0.7,
                                    "MaxAbsErr": 0.1,
                                    "MinAbsErr": 0.05,
                                    "MeanAbsErr": 0.1,
                                    "NormAbsErr": 0.1
                                }
                            },
                            "output_data": {
                                "parent_output": {
                                    "Max": 2.0,
                                    "Min": 0.2,
                                    "Mean": 1.0,
                                    "Norm": 1.4,
                                    "MaxAbsErr": 0.1,
                                    "MinAbsErr": 0.05,
                                    "MeanAbsErr": 0.1,
                                    "NormAbsErr": 0.1
                                }
                            },
                            "matched_node_link": [
                                "bench_parent"
                            ],
                            "data": {
                                "precision_index": 0.95
                            }
                        },
                        "npu_child1": {
                            "node_type": "Module",
                            "subnodes": [],
                            "input_data": {
                                "child1_input": {
                                    "Max": 0.8,
                                    "Min": 0.08,
                                    "Mean": 0.4,
                                    "Norm": 0.56,
                                    "MaxAbsErr": 0.08,
                                    "MinAbsErr": 0.04,
                                    "MeanAbsErr": 0.08,
                                    "NormAbsErr": 0.08
                                }
                            },
                            "output_data": {
                                "child1_output": {
                                    "Max": 1.8,
                                    "Min": 0.18,
                                    "Mean": 0.9,
                                    "Norm": 1.26,
                                    "MaxAbsErr": 0.09,
                                    "MinAbsErr": 0.045,
                                    "MeanAbsErr": 0.09,
                                    "NormAbsErr": 0.09
                                }
                            },
                            "matched_node_link": [
                                "bench_child1"
                            ],
                            "data": {
                                "precision_index": 0.97
                            }
                        },
                        "npu_child2": {
                            "node_type": "Module",
                            "subnodes": [],
                            "input_data": {
                                "child2_input": {
                                    "Max": 0.9,
                                    "Min": 0.09,
                                    "Mean": 0.45,
                                    "Norm": 0.63,
                                    "MaxAbsErr": 0.09,
                                    "MinAbsErr": 0.045,
                                    "MeanAbsErr": 0.09,
                                    "NormAbsErr": 0.09
                                }
                            },
                            "output_data": {
                                "child2_output": {
                                    "Max": 1.9,
                                    "Min": 0.19,
                                    "Mean": 0.95,
                                    "Norm": 1.33,
                                    "MaxAbsErr": 0.095,
                                    "MinAbsErr": 0.0475,
                                    "MeanAbsErr": 0.095,
                                    "NormAbsErr": 0.095
                                }
                            },
                            "matched_node_link": [
                                "bench_child2"
                            ],
                            "data": {
                                "precision_index": 0.96
                            }
                        }
                    }
                },
                "Bench": {
                    "node": {
                        "bench_parent": {
                            "node_type": "Module",
                            "subnodes": [
                                "bench_child1",
                                "bench_child2"
                            ],
                            "input_data": {
                                "parent_input": {
                                    "Max": 1.0,
                                    "Min": 0.1,
                                    "Mean": 0.5,
                                    "Norm": 0.7
                                }
                            },
                            "output_data": {
                                "parent_output": {
                                    "Max": 2.0,
                                    "Min": 0.2,
                                    "Mean": 1.0,
                                    "Norm": 1.4
                                }
                            },
                            "matched_node_link": [
                                "npu_parent"
                            ]
                        },
                        "bench_child1": {
                            "node_type": "Module",
                            "subnodes": [],
                            "input_data": {
                                "child1_input": {
                                    "Max": 0.8,
                                    "Min": 0.08,
                                    "Mean": 0.4,
                                    "Norm": 0.56
                                }
                            },
                            "output_data": {
                                "child1_output": {
                                    "Max": 1.8,
                                    "Min": 0.18,
                                    "Mean": 0.9,
                                    "Norm": 1.26
                                }
                            },
                            "matched_node_link": [
                                "npu_child1"
                            ]
                        },
                        "bench_child2": {
                            "node_type": "Module",
                            "subnodes": [],
                            "input_data": {
                                "child2_input": {
                                    "Max": 0.9,
                                    "Min": 0.09,
                                    "Mean": 0.45,
                                    "Norm": 0.63
                                }
                            },
                            "output_data": {
                                "child2_output": {
                                    "Max": 1.9,
                                    "Min": 0.19,
                                    "Mean": 0.95,
                                    "Norm": 1.33
                                }
                            },
                            "matched_node_link": [
                                "npu_child2"
                            ]
                        }
                    }
                }
            },
            "npu_node_name": "npu_parent",
            "bench_node_name": "bench_parent",
            "task": "summary"
        },
        "expected": {
            "success": true,
            "data": {
                "npuMatchNodes": {},
                "benchMatchNodes": {},
                "npuUnMatchNodes": [
                    "npu_parent",
                    "npu_child1",
                    "npu_child2"
                ],
                "benchUnMatchNodes": [
                    "bench_parent",
                    "bench_child1",
                    "bench_child2"
                ]
            }
        }
    },
    {
        "case_id": 5,
        "description": "MD5任务删除成功",
        "config": {
            "npuMatchNodes": {
                "npu_node_md5": "bench_node_md5"
            },
            "benchMatchNodes": {
                "bench_node_md5": "npu_node_md5"
            },
            "npuUnMatchNodes": [],
            "benchUnMatchNodes": []
        },
        "input": {
            "graph_data": {
                "NPU": {
                    "node": {
                        "npu_node_md5": {
                            "node_type": "Module",
                            "input_data": {
                                "input1": {
                                    "md5": "abc123",
                                    "shape": [
                                        1,
                                        3,
                                        224,
                                        224
                                    ]
                                }
                            },
                            "output_data": {
                                "output1": {
                                    "md5": "def456",
                                    "shape": [
                                        1,
                                        1000
                                    ]
                                }
                            },
                            "matched_node_link": [
                                "bench_node_md5"
                            ],
                            "data": {
                                "precision_index": 1
                            }
                        }
                    }
                },
                "Bench": {
                    "node": {
                        "bench_node_md5": {
                            "node_type": "Module",
                            "input_data": {
                                "input1": {
                                    "md5": "abc123",
                                    "shape": [
                                        1,
                                        3,
                                        224,
                                        224
                                    ]
                                }
                            },
                            "output_data": {
                                "output1": {
                                    "md5": "def456",
                                    "shape": [
                                        1,
                                        1000
                                    ]
                                }
                            },
                            "matched_node_link": [
                                "npu_node_md5"
                            ]
                        }
                    }
                }
            },
            "npu_node_name": "npu_node_md5",
            "bench_node_name": "bench_node_md5",
            "task": "md5"
        },
        "expected": {
            "success": true,
            "data": {
                "npuMatchNodes": {},
                "benchMatchNodes": {},
                "npuUnMatchNodes": [
                    "npu_node_md5"
                ],
                "benchUnMatchNodes": [
                    "bench_node_md5"
                ]
            }
        }
    },
    {
        "case_id": 6,
        "description": "MD5任务递归删除多层子节点",
        "config": {
            "npuMatchNodes": {
                "npu_parent": "bench_parent",
                "npu_child": "bench_child",
                "npu_grandchild": "bench_grandchild"
            },
            "benchMatchNodes": {
                "bench_parent": "npu_parent",
                "bench_child": "npu_child",
                "bench_grandchild": "npu_grandchild"
            },
            "npuUnMatchNodes": [],
            "benchUnMatchNodes": []
        },
        "input": {
            "graph_data": {
                "NPU": {
                    "node": {
                        "npu_parent": {
                            "node_type": "Module",
                            "subnodes": [
                                "npu_child"
                            ],
                            "input_data": {
                                "parent_input": {
                                    "md5": "parent_in",
                                    "shape": [
                                        10
                                    ]
                                }
                            },
                            "output_data": {
                                "parent_output": {
                                    "md5": "parent_out",
                                    "shape": [
                                        10
                                    ]
                                }
                            },
                            "matched_node_link": [
                                "bench_parent"
                            ],
                            "data": {
                                "precision_index": 1
                            }
                        },
                        "npu_child": {
                            "node_type": "Module",
                            "subnodes": [
                                "npu_grandchild"
                            ],
                            "input_data": {
                                "child_input": {
                                    "md5": "child_in",
                                    "shape": [
                                        20
                                    ]
                                }
                            },
                            "output_data": {
                                "child_output": {
                                    "md5": "child_out",
                                    "shape": [
                                        20
                                    ]
                                }
                            },
                            "matched_node_link": [
                                "bench_child"
                            ],
                            "data": {
                                "precision_index": 1
                            }
                        },
                        "npu_grandchild": {
                            "node_type": "API",
                            "subnodes": [],
                            "input_data": {
                                "grandchild_input": {
                                    "md5": "grand_in",
                                    "shape": [
                                        30
                                    ]
                                }
                            },
                            "output_data": {
                                "grandchild_output": {
                                    "md5": "grand_out",
                                    "shape": [
                                        30
                                    ]
                                }
                            },
                            "matched_node_link": [
                                "bench_grandchild"
                            ],
                            "data": {
                                "precision_index": 1
                            }
                        }
                    }
                },
                "Bench": {
                    "node": {
                        "bench_parent": {
                            "node_type": "Module",
                            "subnodes": [
                                "bench_child"
                            ],
                            "input_data": {
                                "parent_input": {
                                    "md5": "parent_in",
                                    "shape": [
                                        10
                                    ]
                                }
                            },
                            "output_data": {
                                "parent_output": {
                                    "md5": "parent_out",
                                    "shape": [
                                        10
                                    ]
                                }
                            },
                            "matched_node_link": [
                                "npu_parent"
                            ]
                        },
                        "bench_child": {
                            "node_type": "Module",
                            "subnodes": [
                                "bench_grandchild"
                            ],
                            "input_data": {
                                "child_input": {
                                    "md5": "child_in",
                                    "shape": [
                                        20
                                    ]
                                }
                            },
                            "output_data": {
                                "child_output": {
                                    "md5": "child_out",
                                    "shape": [
                                        20
                                    ]
                                }
                            },
                            "matched_node_link": [
                                "npu_child"
                            ]
                        },
                        "bench_grandchild": {
                            "node_type": "API",
                            "subnodes": [],
                            "input_data": {
                                "grandchild_input": {
                                    "md5": "grand_in",
                                    "shape": [
                                        30
                                    ]
                                }
                            },
                            "output_data": {
                                "grandchild_output": {
                                    "md5": "grand_out",
                                    "shape": [
                                        30
                                    ]
                                }
                            },
                            "matched_node_link": [
                                "npu_grandchild"
                            ]
                        }
                    }
                }
            },
            "npu_node_name": "npu_parent",
            "bench_node_name": "bench_parent",
            "task": "md5"
        },
        "expected": {
            "success": true,
            "data": {
                "npuMatchNodes": {},
                "benchMatchNodes": {},
                "npuUnMatchNodes": [
                    "npu_parent",
                    "npu_child",
                    "npu_grandchild"
                ],
                "benchUnMatchNodes": [
                    "bench_parent",
                    "bench_child",
                    "bench_grandchild"
                ]
            }
        }
    }
]